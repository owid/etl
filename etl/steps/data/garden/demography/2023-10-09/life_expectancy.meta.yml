# NOTE: To learn more about the fields, hover over their names.
definitions:
  global:
    selected_entities:
      with_americas: &sel_entities_americas
        - Africa
        - Americas
        - Asia
        - Europe
        - Oceania
        - World
      standard: &sel_entities
        - Africa
        - Northern America
        - Latin America and the Caribbean
        - Asia
        - Europe
        - Oceania
        - World
    title_base: Period life expectancy
    title_public: Life expectancy
    data_used: |-
      <% if (age == 0) and (sex == 'all') %>
      Prior to 1950, we use HMD (2023) data combined with Zijdeman (2015). From 1950 onwards, we use UN WPP (2022) data. For old regional data, we use Riley (2005) estimates.
      <% else %>
      Prior to 1950, we use HMD (2023) data. From 1950 onwards, we use UN WPP (2022) data.
      <% endif %>

  common:
    description_short: |-
      <% if (age == 0) %>
      <% if (sex == 'female') %>
      The total number of years a newborn is expected to live (among females).
      <% elif (sex == 'male') %>
      The total number of years a newborn is expected to live (among males).
      <% elif (sex == 'all') %>
      The total number of years a newborn is expected to live.
      <% endif %>
      <% else %>
      <% if (sex == 'female') %>
      The total number of years a person is expected to live, among females who have already reached << age >> years of age.
      <% elif (sex == 'male') %>
      The total number of years a person is expected to live, among males who have already reached << age >> years of age.
      <% elif (sex == 'all') %>
      The total number of years a person is expected to live, among people who have already reached << age >> years of age.
      <% endif %>
      <% endif %>
    description_key:
      - &period_lt_def Period life expectancy assumes that current mortality trends will continue for the rest of a subject's life.
      - |-
        {definitions.global.data_used}
    presentation:
      title_public: |-
        {definitions.global.title_public} at << age if age != 0 else 'birth'>>
      attribution_short: HMD, UN WPP
      topic_tags:
        - Life Expectancy
      grapher_config:
        hasMapTab: true
        selectedEntityNames: *sel_entities
    display:
      numDecimalPlaces: 1
    unit: years
    short_unit: years
    processing_level: minor

# Learn more about the available fields:
# http://docs.owid.io/projects/etl/architecture/metadata/reference/dataset/
dataset:
  title: Life Expectancy (period)
  update_period_days: 365


# Learn more about the available fields:
# http://docs.owid.io/projects/etl/architecture/metadata/reference/tables/
tables:

  # HISTORICAL VALUES (until today)
  life_expectancy:
    variables:

      # {definitions.global.title_base}
      life_expectancy:
        title: |-
          {definitions.global.title_base}
        display: &display_hist
          name: |-
            {definitions.global.title_public} at << 'birth' if (age == 0) else age >><< ', ' + sex + 's' if (sex != 'all') >>
        presentation:
          title_variant: &title_variant_hist << sex + 's, ' if sex != 'all' >>period tables

      life_expectancy_0:
        title: |-
          {definitions.global.title_base} at birth
        display: *display_hist
        presentation:
          attribution_short: Various sources
          title_variant: *title_variant_hist
          grapher_config:
            selectedEntityNames: *sel_entities_americas
          attribution: |-
            UN WPP (2022); HMD (2023); Zijdeman et al. (2015); Riley (2005)


  # WITH PROJECTIONS
  life_expectancy_with_proj:
    variables:

      life_expectancy_with_proj:
        title: |-
          {definitions.global.title_base} (with projections)
        display: &display_w_proj
          name: |-
            {definitions.global.title_public} at << 'birth' if (age == 0) else age >><< ', ' + sex + 's' if (sex != 'all') >>, with UN medium projections
        presentation:
          title_variant: &title_variant_w_proj << sex + 's, ' if sex != 'all' >>period tables, with UN medium projections

      life_expectancy_0_with_proj:
        title: |-
          {definitions.global.title_base} at birth (with projections)
        display: *display_w_proj
        presentation:
          attribution_short: Various sources
          title_variant: *title_variant_w_proj
          grapher_config:
            selectedEntityNames: *sel_entities_americas
          attribution: |-
            UN WPP (2022); HMD (2023); Zijdeman et al. (2015); Riley (2005)


  # ONLY PROJECTIONS
  life_expectancy_only_proj:
    variables:

      life_expectancy_only_proj:
        title: |-
          {definitions.global.title_base} (only projections)
        description_key:
          - *period_lt_def
        display: &display_o_proj
          name: |-
            {definitions.global.title_public} at << 'birth' if (age == 0) else age >><< ', ' + sex + 's' if (sex != 'all') >>, medium projection
        presentation:
          attribution_short: &attr_o_proj UN WPP
          title_variant: &title_variant_o_proj << sex + 's, ' if sex != 'all' >>period tables, medium projection

      life_expectancy_0_only_proj:
        title: |-
          {definitions.global.title_base} at birth (only projections)
        description_key:
          - *period_lt_def
        display: *display_o_proj
        presentation:
          attribution_short: *attr_o_proj
          title_variant: *title_variant_o_proj
          grapher_config:
            selectedEntityNames: *sel_entities_americas
