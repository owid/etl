{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "license": {
    "type": "object",
    "title": "License of the dataset",
    "description": "An origin's license is the license, decided by a producer, of the dataset (or paper or database) from where we extracted the indicator's original data and metadata. The license metadata fields are the attributes of the 'License' object in ETL.\n\nNote 1: When the license is not specified, temporarily assume 'CC BY 4.0' and leave url empty. Contact the producer before publishing. If there is no response after a few days, ask the team and decide on a case-by-case basis.\nNote 2: If the license is 'CC', but the version is not specified, assume 'CC BY 4.0'.",
    "requirement_level": "required",
    "category": "license",
    "additionalProperties": false,
    "properties": {
      "name": {
        "type": "string",
        "title": "License name",
        "description": "Name of the license.",
        "requirement_level": "required",
        "examples": [
          "Public domain",
          "CC0",
          "PDM",
          "CC BY 4.0",
          "CC BY-SA 4.0",
          "© GISAID 2023"
        ],
        "options": [
          "Public domain",
          "CC0",
          "PDM",
          "CC BY 4.0",
          "CC BY-SA 4.0",
          "CC BY-ND 4.0",
          "CC BY-NC 4.0",
          "CC BY-NC-SA 4.0",
          "CC BY-NC-ND 4.0"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "license"
      },
      "url": {
        "type": "string",
        "title": "License URL",
        "description": "URL leading to the producer's website where the dataset license is specified.",
        "requirement_level": "required",
        "examples": [],
        "examples_bad": [],
        "guidelines": [],
        "category": "license"
      }
    }
  },
  "source": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "name": {
        "type": "string"
      },
      "url": {
        "type": "string"
      },
      "owid_data_url": {
        "type": "string"
      },
      "source_data_url": {
        "type": "string"
      },
      "date_accessed": {
        "anyOf": [
          {
            "type": "string",
            "format": "date"
          },
          {
            "type": "string",
            "pattern": "^\\{.*\\}$"
          }
        ]
      },
      "description": {
        "type": "string"
      },
      "publication_year": {
        "type": "integer"
      },
      "publication_date": {
        "anyOf": [
          {
            "type": "string",
            "format": "date"
          },
          {
            "type": "string",
            "pattern": "^\\{.*\\}$"
          }
        ]
      },
      "published_by": {
        "type": "string"
      }
    },
    "required": ["name"]
  },
  "origin": {
    "type": "object",
    "additionalProperties": false,
    "required": ["producer", "date_published", "date_accessed", "citation_producer", "dataset_url_main", "dataset_title_owid"],
    "properties": {
      "dataset_title_owid": {
        "type": "string",
        "title": "Dataset title by OWID",
        "description": "Title of the dataset (written by OWID) which is a one-line description of the dataset.",
        "requirement_level": "required",
        "examples": [
          "Neutron star mergers"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "dataset"
      },
      "dataset_description_owid": {
        "type": "string",
        "title": "Dataset description by OWID",
        "description": "Description of the dataset (written by OWID), usually a one- (or a few) paragraph explanation of the dataset.\n\nNote: Currently, this field won’t appear in charts or data pages. It will be useful internally, and will be seen by users who download the dataset via data catalog.",
        "requirement_level": "recommended",
        "examples": [],
        "examples_bad": [],
        "guidelines": [],
        "category": "dataset"
      },
      "dataset_title_producer": {
        "type": "string",
        "title": "Dataset title by the producer",
        "description": "Title of the dataset (written by the producer) which is a one-line description of the dataset.",
        "requirement_level": "recommended",
        "examples": [],
        "examples_bad": [],
        "guidelines": [],
        "category": "dataset"
      },
      "version": {
        "type": "string",
        "title": "Dataset version by the producer",
        "description": "Producer's version of the dataset.",
        "requirement_level": "recommended",
        "examples": [],
        "examples_bad": [],
        "guidelines": [],
        "category": "dataset"
      },
      "date_published": {
        "title": "Date of publication of the dataset",
        "description": "Exact day (or year, if exact day is unknown) when the producer's dataset (in its current version) was published.",
        "pattern": "\\d\\d\\d\\d-\\d\\d-\\d\\d|\\d\\d\\d\\d|latest",
        "examples": [
          "2022-07-11",
          "1998",
          "latest"
        ],
        "requirement_level": "required",
        "examples_bad": [],
        "guidelines": [],
        "category": "dataset"
      },
      "dataset_description_producer": {
        "type": "string",
        "title": "Dataset description by the producer",
        "description": "Description of the original dataset (written by the producer), if any was given.",
        "requirement_level": "recommended",
        "examples": [],
        "examples_bad": [],
        "guidelines": [],
        "category": "dataset"
      },
      "producer": {
        "title": "Producer name",
        "type": "string",
        "description": "Name of the institution or the author(s) that produced the dataset.",
        "examples": [
          "World Bank",
          "UN Population Division"
        ],
        "examples_bad": [],
        "requirement_level": "required",
        "guidelines": [
          ["Must start with a capital letter.", {"exceptions": ["The name of the institution or the author must be spelled with small letter, e.g. `van Haasteren`."]}],
          ["Must not end with a period.", {"exceptions": ["When using `et al.` (for papers with multiple authors)."]}],
          ["Must not include a date or year."],
          ["Must not mention `Our World in Data` or `OWID`."],
          ["Must not include any semicolon `;`."],
          ["Regarding authors:", {"list": ["One author: `Williams`.", "Two authors: `Williams and Jones`.", "Three or more authors: `Williams et al.`."]}],
          ["Regarding acronyms:", {"list": ["If the acronym is more well known than the full name, use just the acronym, e.g. `NASA`.", "If the acronym is not well known, use the full name, e.g. `Energy Institute`.", "If the institution explicitly asks, follow their guidelines, e.g. `Food and Agriculture Organization of the United Nations` (instead of `FAO`)."]}]
        ],
        "category": "citation"
      },
      "citation_producer": {
        "type": "string",
        "title": "Citation by the producer",
        "description": "Full citation of the original dataset, as expressed by the producer.",
        "requirement_level": "required",
        "examples": [],
        "examples_bad": [],
        "guidelines": [],
        "category": "citation"
      },
      "attribution": {
        "type": "string",
        "title": "Attribution name",
        "description": "Citation of the producer and publication year (and sometimes the dataset) that overrides the automatic attribution format `producer (year)` (where the `year` is automatically extracted from `date_published`).",
        "requirement_level": "optional",
        "examples": [
          "Statistical Review of World Energy, Energy Institute (2023)"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "citation"
      },
      "attribution_short": {
        "type": "string",
        "title": "Attribution short name",
        "description": "Shorter version of attribution, usually an acronym.",
        "requirement_level": "optional",
        "examples": [
          "WB",
          "UN",
          "IHME"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "citation"
      },
      "dataset_url_main": {
        "type": "string",
        "title": "URL of the dataset website",
        "description": "Producer's URL leading to the main website of the dataset. This is not the URL To the specific file.",
        "pattern": "/(https:\/\/www\\.|http:\/\/www\\.|https:\/\/|http:\/\/)?[a-zA-Z]{2,}(\\.[a-zA-Z]{2,})(\\.[a-zA-Z]{2,})?\/[a-zA-Z0-9]{2,}|((https:\/\/www\\.|http:\/\/www\\.|https:\/\/|http:\/\/)?[a-zA-Z]{2,}(\\.[a-zA-Z]{2,})(\\.[a-zA-Z]{2,})?)|(https:\/\/www\\.|http:\/\/www\\.|https:\/\/|http:\/\/)?[a-zA-Z0-9]{2,}\\.[a-zA-Z0-9]{2,}\\.[a-zA-Z0-9]{2,}(\\.[a-zA-Z0-9]{2,})?/g;",
        "requirement_level": "required",
        "examples": [
          "https://data.some_institution.com/dataset_12"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "files"
      },
      "dataset_url_download": {
        "type": "string",
        "title": "Download URL of the dataset",
        "description": "Producer's URL that directly downloads the dataset as a single file.",
        "pattern": "/(https:\/\/www\\.|http:\/\/www\\.|https:\/\/|http:\/\/)?[a-zA-Z]{2,}(\\.[a-zA-Z]{2,})(\\.[a-zA-Z]{2,})?\/[a-zA-Z0-9]{2,}|((https:\/\/www\\.|http:\/\/www\\.|https:\/\/|http:\/\/)?[a-zA-Z]{2,}(\\.[a-zA-Z]{2,})(\\.[a-zA-Z]{2,})?)|(https:\/\/www\\.|http:\/\/www\\.|https:\/\/|http:\/\/)?[a-zA-Z0-9]{2,}\\.[a-zA-Z0-9]{2,}\\.[a-zA-Z0-9]{2,}(\\.[a-zA-Z0-9]{2,})?/g;",
        "requirement_level": "required",
        "examples": [
          "https://data.some_institution.com/dataset_12/data.csv"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "files"
      },
      "date_accessed": {
        "type": "string",
        "format": "date",
        "title": "Date of access",
        "description": "Exact day when the producer's dataset (in its current version) was downloaded by OWID.",
        "pattern": "\\d\\d\\d\\d\\-\\d\\d\\-\\d\\d",
        "requirement_level": "required",
        "examples": [
          "2023-07-13"
        ],
        "examples_bad": [],
        "guidelines": [],
        "category": "files"

      },
      "license": { "$ref": "#/license" }
    }
  },
  "display": {
    "type": "object",
    "properties": {
      "isProjection": {
        "type": "boolean",
        "default": false,
        "description": "Indicates if this time series is a forward projection (if yes then this is rendered\ndifferently in e.g. line charts)\n"
      },
      "name": {
        "type": "string",
        "description": "The display string for this variable"
      },
      "description": {
        "type": "string",
        "description": "Variable description",
        "$comment": "This is a new field that did not exist prior to November 2021 in the DB. It overrides the description on the variable DB table."
      },
      "tableDisplay": {
        "type": "object",
        "description": "Configuration for the table sheet for this variable",
        "properties": {
          "hideAbsoluteChange": {
            "type": "boolean",
            "default": false
          },
          "hideRelativeChange": {
            "type": "boolean",
            "default": false
          }
        },
        "additionalProperties": false
      },
      "tolerance": {
        "type": "integer",
        "default": 0,
        "description": "Tolerance to use. If data points are missing for a time point, a match is accepted if it lies\nwithin the specified time period. The unit is the dominating time unit, either years or days.\n",
        "minimum": 0
      },
      "entityAnnotationsMap": {
        "type": "string",
        "description": "Entity annotations"
      },
      "yearIsDay": {
        "type": "boolean",
        "default": false,
        "description": "Switch to indicate if the number in the year column represents a day (since zeroDay) or not i.e. a year"
      },
      "color": {
        "type": "string",
        "description": "Default color for this time series"
      },
      "includeInTable": {
        "type": "boolean",
        "default": true,
        "description": "Whether to render this time series in the table sheet"
      },
      "shortUnit": {
        "type": "string",
        "description": "Short unit symbol - This is used in tight UI spaces when the value is shown"
      },
      "conversionFactor": {
        "type": "number",
        "description": "Conversion factor to apply before showing values"
      },
      "unit": {
        "type": "string",
        "description": "Long unit text - This is shown in the UI when there is more space (e.g. tooltips) after values"
      },
      "numDecimalPlaces": {
        "type": "integer",
        "description": "Number of decimal places to show",
        "minimum": 0
      },
      "zeroDay": {
        "type": "string",
        "description": "Iso date day string for the starting date if yearIsDay is used"
      }
    },
    "additionalProperties": false
  }
}
