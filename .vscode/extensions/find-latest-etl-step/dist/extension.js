"use strict";var b=Object.create;var h=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),z=(e,t)=>{for(var s in t)h(e,s,{get:t[s],enumerable:!0})},$=(e,t,s,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of k(t))!j.call(e,r)&&r!==s&&h(e,r,{get:()=>t[r],enumerable:!(n=F(t,r))||n.enumerable});return e};var g=(e,t,s)=>(s=e!=null?b(X(e)):{},$(t||!e||!e.__esModule?h(s,"default",{value:e,enumerable:!0}):s,e)),B=e=>$(h({},"__esModule",{value:!0}),e);var I=H((ut,N)=>{function S(e){return Array.isArray(e)?e:[e]}var m="",w=" ",p="\\",K=/^\s+$/,M=/(?:[^\\]|^)\\$/,V=/^\\!/,W=/^\\#/,Y=/\r?\n/g,U=/^\.*\/|^\.+$/,R="/",y="node-ignore";typeof Symbol<"u"&&(y=Symbol.for("node-ignore"));var C=y,q=(e,t,s)=>Object.defineProperty(e,t,{value:s}),Q=/([0-z])-([0-z])/g,L=()=>!1,J=e=>e.replace(Q,(t,s,n)=>s.charCodeAt(0)<=n.charCodeAt(0)?t:m),Z=e=>{let{length:t}=e;return e.slice(0,t-t%2)},tt=[[/^\uFEFF/,()=>m],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,s)=>t+(s.indexOf("\\")===0?w:m)],[/(\\+?)\s/g,(e,t)=>{let{length:s}=t;return t.slice(0,s-s%2)+w}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,s)=>t+6<s.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,s)=>{let n=s.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>p],[/\\\\/g,()=>p],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,s,n,r)=>t===p?`\\[${s}${Z(n)}${r}`:r==="]"&&n.length%2===0?`[${J(s)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],x=Object.create(null),et=(e,t)=>{let s=x[e];return s||(s=tt.reduce((n,[r,i])=>n.replace(r,i.bind(e)),e),x[e]=s),t?new RegExp(s,"i"):new RegExp(s)},P=e=>typeof e=="string",st=e=>e&&P(e)&&!K.test(e)&&!M.test(e)&&e.indexOf("#")!==0,nt=e=>e.split(Y),v=class{constructor(t,s,n,r){this.origin=t,this.pattern=s,this.negative=n,this.regex=r}},rt=(e,t)=>{let s=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(V,"!").replace(W,"#");let r=et(e,t);return new v(s,e,n,r)},it=(e,t)=>{throw new t(e)},l=(e,t,s)=>P(e)?e?l.isNotRelative(e)?s(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:s("path must not be empty",TypeError):s(`path must be a string, but got \`${t}\``,TypeError),T=e=>U.test(e);l.isNotRelative=T;l.convert=e=>e;var A=class{constructor({ignorecase:t=!0,ignoreCase:s=t,allowRelativePaths:n=!1}={}){q(this,C,!0),this._rules=[],this._ignoreCase=s,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[C]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(st(t)){let s=rt(t,this._ignoreCase);this._added=!0,this._rules.push(s)}}add(t){return this._added=!1,S(P(t)?nt(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,s){let n=!1,r=!1;return this._rules.forEach(i=>{let{negative:o}=i;if(r===o&&n!==r||o&&!n&&!r&&!s)return;i.regex.test(t)&&(n=!o,r=o)}),{ignored:n,unignored:r}}_test(t,s,n,r){let i=t&&l.convert(t);return l(i,t,this._allowRelativePaths?L:it),this._t(i,s,n,r)}_t(t,s,n,r){if(t in s)return s[t];if(r||(r=t.split(R)),r.pop(),!r.length)return s[t]=this._testOne(t,n);let i=this._t(r.join(R)+R,s,n,r);return s[t]=i.ignored?i:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return S(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},_=e=>new A(e),ot=e=>l(e&&l.convert(e),e,L);_.isPathValid=ot;_.default=_;N.exports=_;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=s=>/^\\\\\?\\/.test(s)||/["<>|\u0000-\u001F]+/u.test(s)?s:s.replace(/\\/g,"/");l.convert=e;let t=/^[a-z]:\//i;l.isNotRelative=s=>t.test(s)||T(s)}});var lt={};z(lt,{activate:()=>ct});module.exports=B(lt);var a=g(require("vscode")),d=g(require("fs")),u=g(require("path")),D=g(I());function ct(e){let t=[],s=a.commands.registerCommand("extension.findLatestETLStep",async()=>{let n=a.workspace.workspaceFolders?.[0].uri.fsPath;if(!n){a.window.showErrorMessage("No workspace folder found!");return}let r=(0,D.default)(),i=u.join(n,".gitignore");if(d.existsSync(i)){let c=d.readFileSync(i).toString();r.add(c)}await a.window.withProgress({location:a.ProgressLocation.Notification,title:"Indexing ETL files...",cancellable:!1},async()=>{t=O(n,r,n)});let o=a.window.createQuickPick();o.placeholder="Type to filter files by name";let E=t.filter(c=>c.date!==null).sort((c,f)=>c.date&&f.date?f.date.getTime()-c.date.getTime():0);o.items=E.map(c=>({label:u.relative(n,c.path),description:c.date?c.date.toISOString().slice(0,10):""})),o.onDidChangeSelection(c=>{if(c[0]){let f=a.Uri.file(u.join(n,c[0].label));a.workspace.openTextDocument(f).then(G=>a.window.showTextDocument(G))}}),o.show()});e.subscriptions.push(s)}function O(e,t,s){let n=[],r=d.readdirSync(e);for(let i of r){let o=u.join(e,i);if(t.ignores(u.relative(s,o)))continue;if(d.lstatSync(o).isDirectory())n=n.concat(O(o,t,s));else{let c=at(o);n.push({path:o,date:c})}}return n}function at(e){let t=/(\d{4}-\d{2}-\d{2})/,s=e.match(t);return s?new Date(s[1]):null}0&&(module.exports={activate});
